{"version":3,"file":"xzar90-react-router-hash-link.cjs.production.js","sources":["../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js","../src/LinkState.ts","../src/checkIfCanScroll.ts","../src/getLinkHash.ts","../src/reset.ts","../src/isInteractiveElement.ts","../src/getElAndScroll.ts","../src/hashLinkScroll.ts","../src/scrollIntoView.ts","../src/GenericHashLink.tsx","../src/HashLink.tsx","../src/NavHashLink.tsx"],"sourcesContent":["/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","export interface ILinkState {\n  observer: MutationObserver | null;\n  asyncTimerId: number | null;\n  hashFragment: string;\n  scrollFunction: ((elm: HTMLElement) => void) | null;\n}\n\nclass LinkState implements ILinkState {\n  [index: string]: unknown;\n  observer: MutationObserver | null = null;\n  asyncTimerId: number | null = null;\n  hashFragment = '';\n  scrollFunction: ((elm: HTMLElement) => void) | null = null;\n\n  constructor(obj: Partial<ILinkState>) {\n    this.mutate(obj);\n  }\n\n  mutate(obj: Partial<ILinkState>): void {\n    Object.keys(obj).map((key) => {\n      const k = key as keyof ILinkState;\n      this[key] = obj[k];\n    });\n  }\n}\n\nexport default new LinkState({});\n","import React from 'react';\nimport LinkState from './LinkState';\n\nconst state = LinkState;\n\nexport function checkIfCanScroll(\n  e: React.MouseEvent<HTMLAnchorElement | HTMLOrSVGElement, MouseEvent>,\n  props?: Pick<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'target'>,\n) {\n  return (\n    state.hashFragment !== '' &&\n    // ignore non-vanilla click events, same as react-router\n    // below logic adapted from react-router: https://github.com/ReactTraining/react-router/blob/fc91700e08df8147bd2bb1be19a299cbb14dbcaa/packages/react-router-dom/modules/Link.js#L43-L48\n    !e.defaultPrevented && // onClick prevented default\n    e.button === 0 && // ignore everything but left clicks\n    (!props?.target || props?.target === '_self') && // let browser handle \"target=_blank\" etc\n    !(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)\n  );\n}\n","import { IHashLinkBaseProps } from './IHashLinkProps';\n\nexport function getLinkHash(props: IHashLinkBaseProps) {\n  if (typeof props.to === 'string' && props.to.includes('#')) {\n    return `#${props.to.split('#').slice(1).join('#')}`;\n  }\n\n  if (typeof props.to === 'object' && typeof props.to.hash === 'string') {\n    return props.to.hash;\n  }\n\n  return '';\n}\n","import LinkState from './LinkState';\n\nconst state = LinkState;\n\nexport function reset() {\n  state.hashFragment = '';\n  if (state.observer !== null) state.observer.disconnect();\n  if (state.asyncTimerId !== null) {\n    window.clearTimeout(state.asyncTimerId);\n    state.asyncTimerId = null;\n  }\n}\n","export function isInteractiveElement(element: HTMLElement) {\n  const formTags = ['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA'];\n  const linkTags = ['A', 'AREA'];\n  return (\n    (formTags.includes(element.tagName) && !element.hasAttribute('disabled')) ||\n    (linkTags.includes(element.tagName) && element.hasAttribute('href'))\n  );\n}\n","import { isInteractiveElement } from './isInteractiveElement';\nimport LinkState from './LinkState';\nimport { reset } from './reset';\n\nconst state = LinkState;\n\nexport function getElAndScroll() {\n  let element: HTMLElement | null = null;\n  if (state.hashFragment === '#') {\n    // use document.body instead of document.documentElement because of a bug in smoothscroll-polyfill in safari\n    // see https://github.com/iamdustan/smoothscroll/issues/138\n    // while smoothscroll-polyfill is not included, it is the recommended way to implement smoothscroll\n    // in browsers that don't natively support el.scrollIntoView({ behavior: 'smooth' })\n    element = document.body;\n  } else {\n    // check for element with matching id before assume '#top' is the top of the document\n    // see https://html.spec.whatwg.org/multipage/browsing-the-web.html#target-element\n    const id = state.hashFragment.replace('#', '');\n    element = document.getElementById(id);\n    if (element === null && state.hashFragment === '#top') {\n      // see above comment for why document.body instead of document.documentElement\n      element = document.body;\n    }\n  }\n\n  if (element !== null) {\n    state.scrollFunction && state.scrollFunction(element);\n\n    // update focus to where the page is scrolled to\n    // unfortunately this doesn't work in safari (desktop and iOS) when blur() is called\n    let originalTabIndex = element.getAttribute('tabindex');\n    if (originalTabIndex === null && !isInteractiveElement(element)) {\n      element.setAttribute('tabindex', '-1');\n    }\n    element.focus({ preventScroll: true });\n    if (originalTabIndex === null && !isInteractiveElement(element)) {\n      // for some reason calling blur() in safari resets the focus region to where it was previously,\n      // if blur() is not called it works in safari, but then are stuck with default focus styles\n      // on an element that otherwise might never had focus styles applied, so not an option\n      element.blur();\n      element.removeAttribute('tabindex');\n    }\n\n    reset();\n    return true;\n  }\n  return false;\n}\n","import { getElAndScroll } from './getElAndScroll';\nimport LinkState from './LinkState';\nimport { reset } from './reset';\n\nconst state = LinkState;\n\nexport function hashLinkScroll(timeout?: number) {\n  // Push onto callback queue so it runs after the DOM is updated\n  window.setTimeout(() => {\n    if (getElAndScroll() === false) {\n      if (state.observer === null) {\n        state.observer = new MutationObserver(getElAndScroll);\n      }\n\n      state.observer.observe(document, {\n        attributes: true,\n        childList: true,\n        subtree: true,\n      });\n\n      // if the element doesn't show up in specified timeout or 10 seconds, stop checking\n      state.asyncTimerId = window.setTimeout(() => {\n        reset();\n      }, timeout ?? 10000);\n    }\n  }, 0);\n}\n","import { hashLinkScroll } from './hashLinkScroll';\nimport LinkState from './LinkState';\n\nconst state = LinkState;\n\nexport function scrollIntoView(\n  smooth: boolean | undefined,\n  scroll: ((...args: any[]) => void | Promise<void>) | undefined,\n  timeout: number | undefined,\n) {\n  const defaultScrollFn = (el: HTMLElement) =>\n    smooth ? el.scrollIntoView({ behavior: 'smooth' }) : el.scrollIntoView();\n\n  state.scrollFunction = scroll || defaultScrollFn;\n  hashLinkScroll(timeout);\n}\n","import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { checkIfCanScroll } from './checkIfCanScroll';\nimport { getLinkHash } from './getLinkHash';\nimport { IHashLinkBaseProps } from './IHashLinkProps';\nimport LinkState from './LinkState';\nimport { reset } from './reset';\nimport { scrollIntoView } from './scrollIntoView';\n\nconst state = LinkState;\n\n// Define our Props type to allow the specifying of a Tag for HTML attributes\n// Also define children as React does with React.ReactNode\ntype IHashLinkProps = {} & IHashLinkBaseProps;\n\nconst GenericHashLink: React.FC<IHashLinkProps> = (props: IHashLinkProps) => {\n  const navigate = useNavigate();\n  const { scroll, smooth, timeout, elementId, onClick, children, to, ...rest } =\n    props;\n  const linkHash = getLinkHash({ ...props, children });\n\n  const handleClick = (e: React.MouseEvent<HTMLOrSVGElement, MouseEvent>) => {\n    reset();\n    state.hashFragment = elementId ? `#${elementId}` : linkHash;\n    if (onClick) {\n      onClick(e);\n    }\n\n    const canScroll = checkIfCanScroll(e);\n    if (canScroll) {\n      navigate(to);\n      scrollIntoView(smooth, scroll, timeout);\n    }\n  };\n\n  var inputReactObject = React.Children.only(children) as React.ReactElement;\n  var clonedChild = React.cloneElement(inputReactObject, {\n    onClick: (e: any) => {\n      inputReactObject.props.onClick && inputReactObject.props.onClick(e);\n      handleClick(e);\n    },\n  });\n\n  return <>{clonedChild}</>;\n};\n\nexport default GenericHashLink;\n","import React from 'react';\nimport { Link, LinkProps } from 'react-router-dom';\nimport { checkIfCanScroll } from './checkIfCanScroll';\nimport { getLinkHash } from './getLinkHash';\nimport { IHashLinkBaseProps } from './IHashLinkProps';\nimport LinkState from './LinkState';\nimport { reset } from './reset';\nimport { scrollIntoView } from './scrollIntoView';\n\nconst state = LinkState;\ntype IHashLinkProps = IHashLinkBaseProps & LinkProps;\n\nconst NavHashLink: React.FC<IHashLinkProps> = React.forwardRef<\n  HTMLAnchorElement,\n  IHashLinkProps\n>((props, ref) => {\n  const { scroll, smooth, timeout, elementId, children, onClick, ...rest } =\n    props;\n  const linkHash = getLinkHash(props);\n\n  const handleClick = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n    reset();\n    state.hashFragment = elementId ? `#${elementId}` : linkHash;\n    if (onClick) {\n      onClick(e);\n    }\n\n    const canScroll = checkIfCanScroll(e, props);\n    if (canScroll) {\n      scrollIntoView(smooth, scroll, timeout);\n    }\n  };\n\n  return (\n    <Link ref={ref} onClick={handleClick} {...rest}>\n      {children}\n    </Link>\n  );\n});\n\nexport default NavHashLink;\n","import React from 'react';\nimport { NavLink, NavLinkProps } from 'react-router-dom';\nimport { checkIfCanScroll } from './checkIfCanScroll';\nimport { getLinkHash } from './getLinkHash';\nimport { IHashLinkBaseProps } from './IHashLinkProps';\nimport LinkState from './LinkState';\nimport { reset } from './reset';\nimport { scrollIntoView } from './scrollIntoView';\n\nconst state = LinkState;\ntype INavHashLinkProps = IHashLinkBaseProps & NavLinkProps;\n\nconst NavHashLink: React.FC<INavHashLinkProps> = React.forwardRef<\n  HTMLAnchorElement,\n  INavHashLinkProps\n>((props, ref) => {\n  const { scroll, smooth, timeout, elementId, children, onClick, ...rest } =\n    props;\n  const linkHash = getLinkHash(props);\n\n  const handleClick = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n    reset();\n    state.hashFragment = elementId ? `#${elementId}` : linkHash;\n    if (onClick) {\n      onClick(e);\n    }\n\n    const canScroll = checkIfCanScroll(e, props);\n    if (canScroll) {\n      scrollIntoView(smooth, scroll, timeout);\n    }\n  };\n\n  return (\n    <NavLink ref={ref} onClick={handleClick} {...rest}>\n      {children}\n    </NavLink>\n  );\n});\n\nexport default NavHashLink;\n"],"names":["g","exports","Symbol","for","h","m","f","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","n","Object","prototype","hasOwnProperty","p","key","ref","__self","__source","q","c","a","k","b","d","e","l","call","defaultProps","$$typeof","type","props","_owner","current","module","require$$0","constructor","obj","this","mutate","keys","map","state","LinkState","checkIfCanScroll","hashFragment","defaultPrevented","button","target","metaKey","altKey","ctrlKey","shiftKey","getLinkHash","to","includes","split","slice","join","hash","reset","observer","disconnect","asyncTimerId","window","clearTimeout","isInteractiveElement","element","tagName","hasAttribute","getElAndScroll","document","body","id","replace","getElementById","scrollFunction","originalTabIndex","getAttribute","setAttribute","focus","preventScroll","blur","removeAttribute","scrollIntoView","smooth","scroll","timeout","el","behavior","setTimeout","MutationObserver","observe","attributes","childList","subtree","hashLinkScroll","navigate","useNavigate","elementId","onClick","children","rest","linkHash","inputReactObject","React","Children","only","clonedChild","cloneElement","handleClick","_jsx","forwardRef","Link","NavLink"],"mappings":"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"}